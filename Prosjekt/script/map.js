// ----Kartdataene------
var lofotenMapData = [{
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature",
        "properties": {
            "popupContent": "Start og avsluttning på reise. Dag 1: resisen starter fra Svovær. Dag 4: reisen avslutter på Svolvær."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            14.56765651702881,
            68.2321600865177
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
            "popupContent": "Dag 2: Stopp på Henningsvær, med mulighet for rib-tur eller fisketur i midnattsolen."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            14.208755493164062,
            68.14652071926851
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
            "popupContent": "Dag 3: Stopp på Å med hvalsafari."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            12.978973388671875,
            67.8792908066858
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
            "popupContent": "Dag 4: Vi drar inn i den vakre Trollfjorden før vi setter snuten hjemover."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            14.93659973144531,
            68.36351002324014
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "type": "LineString",
          "coordinates": [
            [
              14.566497802734373,
              68.2322396614308
            ],
            [
              14.548645019531248,
              68.20982042840029
            ],
            [
              14.522552490234375,
              68.1894202474079
            ],
            [
              14.482727050781252,
              68.17615038884539
            ],
            [
              14.403076171875,
              68.16338366778501
            ],
            [
              14.31793212890625,
              68.15623120159573
            ],
            [
              14.2108154296875,
              68.14805422620769
            ],
            [
              14.08172607421875,
              68.1071256663432
            ],
            [
              13.8812255859375,
              68.05278304131106
            ],
            [
              13.49945068359375,
              67.98802029075827
            ],
            [
              13.25775146484375,
              67.93546032652277
            ],
            [
              12.980346679687498,
              67.87967864740527
            ],
            [
              13.477478027343748,
              67.91688129785506
            ],
            [
              13.6614990234375,
              67.941650035336
            ],
            [
              13.96636962890625,
              67.98596135891634
            ],
            [
              14.39208984375,
              68.05688884134597
            ],
            [
              14.743652343749998,
              68.13680613169655
            ],
            [
              14.883728027343748,
              68.19503210757499
            ],
            [
              14.95513916015625,
              68.2510752102293
            ],
            [
              14.964752197265625,
              68.27269150068895
            ],
            [
              14.975738525390623,
              68.29149374033034
            ],
            [
              14.966125488281252,
              68.31129555378853
            ],
            [
              14.959945678710936,
              68.32474082158716
            ],
            [
              14.967498779296873,
              68.33386893137417
            ],
            [
              14.979858398437502,
              68.34502054084477
            ],
            [
              14.995651245117188,
              68.35945882038932
            ],
            [
              14.998054504394531,
              68.36351002324014
            ],
            [
              14.99530792236328,
              68.36464929394825
            ],
            [
              14.937286376953125,
              68.36388978648853
            ],
            [
              14.99359130859375,
              68.36439612761531
            ]
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "type": "LineString",
          "coordinates": [
            [
              14.99359130859375,
              68.36452271113431
            ],
            [
              14.987411499023436,
              68.35743294817568
            ],
            [
              14.981231689453123,
              68.34958098793473
            ],
            [
              14.969215393066406,
              68.34007902459251
            ],
            [
              14.956855773925781,
              68.33095340522786
            ],
            [
              14.923553466796875,
              68.31865338156409
            ],
            [
              14.882354736328127,
              68.30799644579106
            ],
            [
              14.841156005859373,
              68.28920780882423
            ],
            [
              14.794464111328123,
              68.27396241031346
            ],
            [
              14.756698608398438,
              68.25590886206668
            ],
            [
              14.720306396484373,
              68.24165937506933
            ],
            [
              14.650955200195312,
              68.22154231174606
            ],
            [
              14.595336914062498,
              68.22561808218681
            ],
            [
              14.568557739257814,
              68.23249429929284
            ]
          ]
        }
      }
    ]
  }];

var henningsvaerMapData = [{
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature",
        "properties": {
            "popupContent": "Start og avsluttning på reise. Dag 1: resisen starter fra Henningsvær. Dag 2: reisen avslutter på Henningsvær."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            14.201459884643553,
            68.15076956033836
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "popupContent": "Dag 1: Nydelig fiskemiddag med dagens fangst. Mulighet for hvalsafari fra Å."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            12.987899780273438,
            67.87974328689724
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "popupContent": "Dag 2: Stop på Værøy med mulighet for avslapping, fottur eller kajakkpaddling."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            12.63702392578125,
            67.65416574898566
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "type": "LineString",
          "coordinates": [
            [
              14.201459884643553,
              68.15076956033836
            ],
            [
              12.987942695617676,
              67.8797594467422
            ],
            [
              12.986526489257812,
              67.85096098306639
            ],
            [
              12.903442382812498,
              67.73339440055
            ],
            [
              12.7935791015625,
              67.64581034758912
            ],
            [
              12.6947021484375,
              67.62804527718282
            ],
            [
              12.661056518554688,
              67.63301039473585
            ],
            [
              12.637710571289062,
              67.65364362321732
            ],
            [
              12.64251708984375,
              67.61445118724366
            ],
            [
              12.655563354492188,
              67.60346562545749
            ],
            [
              12.723541259765625,
              67.5956156649846
            ],
            [
              12.805938720703123,
              67.60372724587064
            ],
            [
              12.919921874999998,
              67.62909065197242
            ],
            [
              14.20154571533203,
              68.15057790022045
            ]
          ]
        }
      }
    ]
  }];

var bodoeMapData = [{
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature",
        "properties": {
          "popupContent": "Start og avsluttning på reise. Dag 1: Avreise fra Bodø. Dag 7: Avslutter reise i Bodø."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            14.364151954650877,
            67.28379544571632
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "popupContent": "Dag 1: Saltstrømmen, med mulighet for ribb."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            14.61078643798828,
            67.23181761428154
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "popupContent": "Dag 2: Stopp på Fugløya, med muligheter for fisketur eller gåtur."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            13.772735595703123,
            67.05137505309885
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "popupContent": "Dag 3: Stopp i Glomfjord, med mulighet for bretur på Svartisen."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            13.706130981445312,
            66.70245313735215
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "popupContent": "Dag 4: Svartisen fra avstand."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            13.977355957031248,
            66.80783515142156
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {
          "popupContent": "Dag 5-6: Avslapping på båten."
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            13.415679931640625,
            67.13903070858395
          ]
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "type": "LineString",
          "coordinates": [
            [
              14.364280700683594,
              67.28377887322337
            ],
            [
              14.313983917236328,
              67.27064986259232
            ],
            [
              14.302654266357422,
              67.26394997370087
            ],
            [
              14.299392700195312,
              67.25452716489158
            ],
            [
              14.309005737304688,
              67.24788916513515
            ],
            [
              14.325828552246094,
              67.24629577226821
            ],
            [
              14.374923706054686,
              67.2472252642809
            ],
            [
              14.467620849609375,
              67.24788916513515
            ],
            [
              14.558258056640623,
              67.24788916513515
            ],
            [
              14.607696533203125,
              67.2415149596819
            ],
            [
              14.611473083496096,
              67.23248194080642
            ],
            [
              14.602546691894531,
              67.23925702313805
            ],
            [
              14.575080871582031,
              67.2415149596819
            ],
            [
              14.478950500488283,
              67.24284305857493
            ],
            [
              14.35020446777344,
              67.22610364851515
            ],
            [
              14.26094055175781,
              67.21068245713607
            ],
            [
              14.162063598632812,
              67.18912942176102
            ],
            [
              14.08172607421875,
              67.17554909438454
            ],
            [
              14.047393798828125,
              67.16862284538965
            ],
            [
              14.02679443359375,
              67.14703216100033
            ],
            [
              14.02130126953125,
              67.12942546602565
            ],
            [
              13.980789184570312,
              67.10886809801592
            ],
            [
              13.923797607421873,
              67.08695661239739
            ],
            [
              13.901138305664062,
              67.07626088329239
            ],
            [
              13.891525268554686,
              67.0599408019667
            ],
            [
              13.854446411132812,
              67.04012791618119
            ],
            [
              13.82080078125,
              67.04548434579513
            ],
            [
              13.776168823242188,
              67.05324906915747
            ],
            [
              13.46649169921875,
              66.96178929585454
            ],
            [
              13.46649169921875,
              66.93974468064502
            ],
            [
              13.511810302734375,
              66.90690968501593
            ],
            [
              13.54339599609375,
              66.8772664784669
            ],
            [
              13.590087890625,
              66.84704735751328
            ],
            [
              13.5516357421875,
              66.82976253611592
            ],
            [
              13.580474853515625,
              66.82219659327606
            ],
            [
              13.9801025390625,
              66.80868017479824
            ],
            [
              13.574981689453125,
              66.81625028637526
            ],
            [
              13.4088134765625,
              66.80381244134801
            ],
            [
              13.286590576171875,
              66.77945929207732
            ],
            [
              13.206939697265625,
              66.74911942059309
            ],
            [
              13.260498046875,
              66.74152860435939
            ],
            [
              13.46099853515625,
              66.73718994427429
            ],
            [
              13.53240966796875,
              66.73122303857558
            ],
            [
              13.55712890625,
              66.71439943596735
            ],
            [
              13.56536865234375,
              66.70299627645545
            ],
            [
              13.704071044921875,
              66.70353940360214
            ],
            [
              13.574981689453125,
              66.71005599682081
            ],
            [
              13.517303466796873,
              66.73176554427145
            ],
            [
              13.19732666015625,
              66.74044401099103
            ],
            [
              13.179473876953125,
              66.7507457196216
            ],
            [
              13.2110595703125,
              66.77241944244105
            ],
            [
              13.414306640625,
              67.14223160765509
            ],
            [
              14.363422393798826,
              67.28358000241472
            ]
          ]
        }
      }
    ]
  }];
// ---------------------
// Oppsett av kartet
document.body.onload = function() {
    // Henter id til kartelementet i HTML
    var mapId = $(".map")[0].id;
    var mapData = null;
    var mapView = null;

    // Henter riktig data og setter kartets senter utifra kart ID
    if (mapId === "map-lofoten") {
        mapData = lofotenMapData;
        mapView = [68.175040, 14.084761];

    } else if (mapId === "map-henningsvaer") {
        mapData = henningsvaerMapData;
        mapView = [67.880712, 13.499450];

    } else if (mapId === "map-bodoe") {
        mapData = bodoeMapData;
        mapView = [66.991330, 13.927917];  
    }

    var map = L.map(mapId, {
        scrollWheelZoom: false
    }).setView(mapView, 8);

    // Ved klikk på kartet slår man av og på zooming ved scrolling
    // i kartet. Scroll-funksjonen er skrudd av til å begynne med.
    map.on('click', function() {
        if (map.scrollWheelZoom.enabled()) {
          map.scrollWheelZoom.disable();
          }
          else {
          map.scrollWheelZoom.enable();
          }
        });

    // Henter bakgrunnskart fra Kartverket
    L.tileLayer('https://opencache.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=norges_grunnkart&zoom={z}&x={x}&y={y}', {
        attribution: '<a href="http://www.kartverket.no/">Kartverket</a>'
        }).addTo(map);
    
    // Legger inn dataene om reiseruten, og definerer popup på der hvor dette er definert som åpnes med klikk.
    L.geoJSON(mapData, {
        onEachFeature: function onEachFeature(feature, layer) {
            if(feature.properties && feature.properties.popupContent) {
                layer.bindPopup(feature.properties.popupContent);
            }
        }
    }).addTo(map);

}
